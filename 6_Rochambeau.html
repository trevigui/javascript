<!-- A retenir : ` ${variable} ` est un objet dans un template literal. -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<!--  *********************************************** LA METHODE JEREMIENNE ************************************************** -->

<!-- for (let i = 0; i < 3; i++) {
    let choixOrdi = Math.random() < 0.33 ? "pierre" : Math.random() < 0.5 ? "feuille" : "ciseaux";
    let choixUtilisateur = prompt("Choisissez parmi pierre, feuille ou ciseaux : ").toLowerCase();

    let resultat = comparer(choixOrdi, choixUtilisateur);
    console.log("Le résultat de cette manche est :", resultat);
 -->

<!-- 
variable i est initialisée à 0. C'est la première étape d'une boucle for, où la boucle continue jusqu'à ce que la condition i < 3 ne soit plus vraie.

Un choix aléatoire est effectué pour le joueur informatique (choixOrdi) à l'aide de Math.random(). Ce nombre est comparé aux fractions 0,33, 0,5 et 0,67 pour déterminer s'il s'agit d'un choix de pierre, de papier ou de ciseaux.

L'utilisateur est invité à faire un choix. Cette entrée est convertie en minuscules à l'aide de la méthode toLowerCase().

La fonction comparer() est appelée avec le choix de l'ordinateur et le choix de l'utilisateur comme arguments. Cette fonction renvoie le résultat de la comparaison (gagner, perdre ou égalité).

Le résultat de la comparaison est enregistré sur la console.

La boucle incrémente la valeur de i de 1 et recommence. Cela continue jusqu'à ce que l'utilisateur ait fait trois choix, moment auquel la boucle se termine.
-->
<!--  *********************************************************************************************************************** -->


<script>

    // Définition des résultats du Math.random pour UserChoice et ComChoice
    // Soit pierre == 1
    // Soit papier == 2
    // Soit ciseaux == 3

    // Je suis obligé de mettre la conversion et la comparaison dans une seule fonction, car la variable que je redéclare dans la fonction, est restreinte à la fonction ou boucle.

    let scoreOrdi = 0 // Très important de mettre mon score à zéro au départ apparemment.
    let scoreUser = 0

    function convertThenCompare() { // Pas besoin de mettre UserChoice en paramètre car la variable a déjà été appelée avant (dans la boucle for, avant l'appel de la fonction convertThenCompare.)
        
        if(UserChoice.toLowerCase().includes("pierre") == true) {
            UserChoice = 1;
        }
        else if(UserChoice.toLowerCase().includes("papier") == true || UserChoice.toLowerCase().includes("feuille") == true) {
            UserChoice = 2;
        }
        else if(UserChoice.toLowerCase().includes("ciseau") == true ) {
            UserChoice = 3;
        }
        else {
            alert('Vous n\'avez pas saisi un choix valide');
        }

        /* alert(`UserChoice = ${UserChoice}`)       // For troubleshooting */

        switch(true){ // Les variables utilisées sont déjà appelées dans la fonction parente, pas besoin de les rappeler ici.
        case (UserChoice === ComChoice) :
            if(ComChoice === 1) {
                scoreOrdi++;
                scoreUser++;
                alert(`Manche ${manche}\n\nRéponse ORDI : pierre\nEgalité`);
            }
            else if(ComChoice === 2) {
                scoreOrdi++;
                scoreUser++;
                alert(`Manche ${manche}\n\nRéponse ORDI : papier\nEgalité`);
            }
            else if(ComChoice === 3) {
                scoreOrdi++;
                scoreUser++;
                alert(`Manche ${manche}\n\nRéponse ORDI : ciseaux\nEgalité`);
            }
            else {
                scoreOrdi++;
                scoreUser++;
                alert(`Une erreur est survenue`);
            }
            break;
        case (UserChoice === 1 && ComChoice === 2) :
            alert(`Manche ${manche}\n\nRéponse ORDI : feuille\nVous avez perdu.`);
            scoreOrdi++;
            break;
        case (UserChoice === 1 && ComChoice === 3) :
            alert(`Manche ${manche}\n\nRéponse ORDI : ciseaux.\nVous avez gagné.`);
            scoreUser++;
            break;
        case (UserChoice === 2 && ComChoice === 1) :
            alert(`Manche ${manche}\n\nRéponse ORDI : pierre\nVous avez gagné.`);
            scoreUser++;
            break;
        case (UserChoice === 2 && ComChoice === 3) :
            alert(`Manche ${manche}\n\nRéponse ORDI : ciseaux\nVous avez perdu.`);
            scoreOrdi++;
            break;
        case (UserChoice === 3 && ComChoice === 1) :
            alert(`Manche ${manche}\n\nRéponse ORDI : pierre\nVous avez perdu.`);
            scoreOrdi++;
            break;
        case (UserChoice === 3 && ComChoice === 2) :
            alert(`Manche ${manche}\n\nRéponse ORDI : papier\nVous avez gagné.`);
            scoreUser++;
            break;
        default : throw new Error(`Avez-vous tapé "pierre", "papier", ou "ciseaux" ?`); 
        }
    }
    
    for(manche=1; manche<4 ; manche++) {
        // my variables have to be called with var in order to be recallable in the function and not be limited to the for loop's hierarchcial level.
        var ComChoice = Math.ceil(Math.random() * 3); //Using ceil to prevent the computer from choosing "O"
        /* alert(`ComChoice = ${ComChoice}`)           // For troubleshooting */
        var UserChoice = prompt(`Manche ${manche}\n\nChoisissez entre "pierre" "papier" et "ciseaux".`);
        convertThenCompare(UserChoice, ComChoice);

        if(manche === 3)
            if(scoreOrdi > scoreUser) {
                alert(`Votre score est de ${scoreUser}\nLe score ORDI est de ${scoreOrdi}.\nVous avez perdu.\n\nBonne journée !`)
            }
            else if(scoreOrdi < scoreUser) {
                alert(`Votre score est de ${scoreUser}\nLe score ORDI est de ${scoreOrdi}.\nVous avez gagné.\n\nBonne journée !`)
            }
            else if (scoreOrdi === scoreUser) {
                alert(`Votre score est de ${scoreUser}\nLe score ORDI est de ${scoreOrdi}.\nVous êtes à égalité.\n\nBonne journée !`)
            }
            else {
                alert('Une erreur est survenue.')
            }
        else{
           ;
        }
    }

</script>

<body>
    
</body>
</html>